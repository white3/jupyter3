language: java

name: Java CI with Maven

on:
  push:
    branches: [ main | master ]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Set up JDK 11
      uses: actions/setup-java@v1
      with:
        java-version: 11
    - name: Build with Maven
      run: mvn clean package

before_deploy:
  - rm target/app.jar
  - mv target/*.jar target/app.jar

deploy:
  provider: releases
  api_key:
    secure: 7d0176c63c8060a8543eeda3e5de0284595d9d51
  file: target/app.jar
  skip_cleanup: true
  on:
    tags: false
